<h1>Hamburgaler</h1>

<h3>Keep track of Hamburgers you want to eat or have Eaten</h3>

<h2>Burgers to snarf!!</h2>
<ul>
  {{#each burger_name}}
    {{#unless devoured}}
      {{> burgers/burger-block devoured=true}}
    {{/unless}}
  {{/each}}
</ul>
<h2>Burgers snarffed!!</h2>
<ul>
  {{#each burger_name}}
    {{#if devoured}}
      {{> burgers/burger-block devoured=false}}
    {{/if}}
  {{/each}}
</ul>

<h2>Add a burger</h2>
<form id="addBurger" class="button-size">
  <textarea type="text" name="newBurger"></textarea>
  <button type="submit">Burgers youd like to eat.</button>
</form>

<script type="text/javascript">
  $(".devour").on("click", function(event) {
    var id = $(this).data("burger_nameid");
    var newEat = $(this).data("neweat");
    console.log(newEat)

    var newEatState = {
      devoured: newEat
    };
    console.log(newEatState)

    // Send the DELETE request.
    $.ajax("/burger/" + id, {
      type: "PUT",
      data: newEatState,
    }).then(
      function() {
        console.log("Updated id ", id);
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });

  $("#addBurger").on("submit", function(event) {
    // Make sure to preventDefault on a submit event.
    event.preventDefault();

    var newBurger = {
      burger_name: $("#addBurger [name=newBurger]").val().trim()
    };

    // Send the POST request.
    $.ajax("/burger", {
      type: "POST",
      data: newBurger
    }).then(
      function() {
        console.log("Added a Burger");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });
</script>