<h1>Hamburgaler</h1>

<h3>Keep track of Hamburgers you want to eat or have Eaten</h3>

<ul>
  {{#each burger_name}}
  	<li>
			<p>
      {{this.id}}. {{this.burger_name}}
			<button data-burger_nameid="{{this.id}}" class="devour">Devour!</button>
			</p>
  	</li>
  {{/each}}
</ul>
{{!-- <ul>
  {{#each burger_name}}
  	<li>
        <p>{{this.burger_name}}</p>
  	</li>
  {{/each}}
</ul> --}}

<h2>Add a burger</h2>
<form id="addBurger" class="button-size">
  <textarea type="text" name="newBurger"></textarea>
  <button type="submit">Burgers youd like to eat.</button>
</form>

<script type="text/javascript">
  $(".devour").on("click", function(event) {
    var id = $(this).data("burger_nameid");

    // Send the DELETE request.
    $.ajax("/burger/" + id, {
      type: "PUT",
    }).then(
      function() {
        console.log("Updated id ", id);
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });

  $("#addBurger").on("submit", function(event) {
    // Make sure to preventDefault on a submit event.
    event.preventDefault();

    var newBurger = {
      burger_name: $("#addBurger [name=newBurger]").val().trim()
    };

    // Send the POST request.
    $.ajax("/burger", {
      type: "POST",
      data: newBurger
    }).then(
      function() {
        console.log("Added a Burger");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });

  {{!-- $("#updateBurger").on("submit", function(event) {
    // Make sure to preventDefault on a submit event.
    event.preventDefault();

    var id = $("[name=id]").val().trim();

    var updatedPlan = {
      plan: $("#updateplan [name=plan]").val().trim()
    };

    // Send the PUT request.
    $.ajax("/burger/" + id, {
      type: "PUT",
    }).then(
      function() {
        console.log("updated id ", id);
        // Reload the page to get the updated list
        location.reload();
      }
    );
  }); --}}
</script>